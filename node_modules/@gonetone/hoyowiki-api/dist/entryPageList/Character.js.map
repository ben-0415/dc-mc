{"version":3,"file":"Character.js","sourceRoot":"","sources":["../../src/entryPageList/Character.ts"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA6BG;;;AAEH,sCAA4C;AAC5C,8BAAkD;AAGlD,iEAA6D;AAE7D,MAAa,SAAS;IACpB;;;;OAIG;IACI,KAAK,CAAC,GAAG,CAAE,OAA8B;;QAC9C,MAAM,QAAQ,GAAG,MAAM,mBAAa,CAAC,IAAI,CAAC,sBAAsB,EAAE;YAChE,OAAO,EAAE,MAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,OAAO,mCAAI,EAAE;YAC/B,OAAO,mCAAyB;YAChC,QAAQ,EAAE,MAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,OAAO,mCAAI,CAAC;YAC/B,SAAS,EAAE,MAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,QAAQ,mCAAI,EAAE;YAClC,MAAM,EAAE,IAAI;SACb,EAAE;YACD,OAAO,EAAE;gBACP,cAAc,EAAE,kBAAkB;aACnC;SACF,CAAC,CAAA;QAEF,IAAI,CAAA,MAAA,QAAQ,CAAC,IAAI,0CAAE,OAAO,MAAK,CAAC;YAAE,OAAO,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAA;QAE3D,MAAM,IAAI,mCAAgB,CAAC,CAAA,MAAA,QAAQ,CAAC,IAAI,0CAAE,OAAO,KAAI,+BAA+B,EAAE,MAAA,QAAQ,CAAC,IAAI,0CAAE,OAAO,CAAC,CAAA;IAC/G,CAAC;IAED;;;;;;OAMG;IACK,KAAK,CAAC,aAAa,CAAE,OAA8B;;QACzD,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAA;QAEpC,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,KAAK,CAAC;YAAE,OAAO,EAAE,CAAA;QAErC,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC;YACxC,OAAO,EAAE,CAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,OAAO,EAAC,CAAC,CAAC,OAAO,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YACnD,QAAQ,EAAE,MAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,QAAQ,mCAAI,EAAE;YACjC,OAAO,EAAE,MAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,OAAO,mCAAI,EAAE;SAChC,CAAC,CAAA;QAEF,OAAO,CAAC,GAAG,IAAI,CAAC,IAAI,EAAE,GAAG,QAAQ,CAAC,CAAA;IACpC,CAAC;IAED;;;;;;OAMG;IACI,KAAK,CAAC,OAAO,CAAE,GAAG,OAAiB;QACxC,OAAO,MAAM,IAAI,CAAC,aAAa,CAAC;YAC9B,OAAO;SACR,CAAC,CAAA;IACJ,CAAC;IAED;;;;;;OAMG;IACI,KAAK,CAAC,QAAQ,CAAE,GAAG,OAAiB;QACzC,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,GAAG,CAAC;YAC1B,OAAO,EAAE,CAAC;YACV,QAAQ,EAAE,CAAC;YACX,OAAO;SACR,CAAC,CAAA;QAEF,OAAO,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;IAC3B,CAAC;IAED;;;;;;OAMG;IACI,KAAK,CAAC,gBAAgB,CAAE,IAAY;QACzC,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,OAAO,EAAE,CAAA;QACjC,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,KAAK,IAAI,CAAC,CAAA;IAChD,CAAC;CACF;AAtFD,8BAsFC","sourcesContent":["/*\n * Copyright (c) 2020-2022 原神資訊站 Genshin Impact Info\n * https://genshininfo.reh.tw/\n *\n * Developed by 旋風之音 GoneTone\n * https://github.com/GoneTone\n *\n *                               _oo0oo_\n *                              o8888888o\n *                              88\" . \"88\n *                              (| -_- |)\n *                              0\\  =  /0\n *                            ___/`---'\\___\n *                          .' \\\\|     |# '.\n *                         / \\\\|||  :  |||# \\\n *                        / _||||| -:- |||||- \\\n *                       |   | \\\\\\  -  #/ |   |\n *                       | \\_|  ''\\---/''  |_/ |\n *                       \\  .-\\__  '-'  ___/-. /\n *                     ___'. .'  /--.--\\  `. .'___\n *                  .\"\" '<  `.___\\_<|>_/___.' >' \"\".\n *                 | | :  `- \\`.;`\\ _ /`;.`/ - ` : | |\n *                 \\  \\ `_.   \\_ __\\ /__ _/   .-` /  /\n *             =====`-.____`.___ \\_____/___.-`___.-'=====\n *                               `=---='\n *           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n *               佛祖保佑                       永無 BUG\n *\n * GitHub: https://github.com/GoneTone/node-hoyowiki-api\n */\n\nimport { axiosInstance } from '../utils/api'\nimport { EntryPageMenu } from '../utils/constants'\nimport type { EntryPageListData, EntryPageDataOptions } from '../interfaces/EntryPageListDataInterface'\nimport type * as EntryPageListDataCharacterAPIInterface from '../interfaces/EntryPageListDataCharacterAPIInterface'\nimport { HoYoWikiAPIError } from '../errors/HoYoWikiAPIError'\n\nexport class Character implements EntryPageListData {\n  /**\n   * @param {EntryPageDataOptions | undefined} options\n   *\n   * @returns {Promise<EntryPageListDataCharacterAPIInterface.Data>}\n   */\n  public async get (options?: EntryPageDataOptions): Promise<EntryPageListDataCharacterAPIInterface.Data> {\n    const response = await axiosInstance.post('/get_entry_page_list', {\n      filters: options?.filters ?? [],\n      menu_id: EntryPageMenu.Character,\n      page_num: options?.pageNum ?? 1,\n      page_size: options?.pageSize ?? 30,\n      use_es: true\n    }, {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n\n    if (response.data?.retcode === 0) return response.data.data\n\n    throw new HoYoWikiAPIError(response.data?.message || 'Unable to get character data.', response.data?.retcode)\n  }\n\n  /**\n   * @param {EntryPageDataOptions | undefined} options\n   *\n   * @returns {Promise<EntryPageListDataCharacterAPIInterface.List[]>}\n   *\n   * @private\n   */\n  private async getListConcat (options?: EntryPageDataOptions): Promise<EntryPageListDataCharacterAPIInterface.List[]> {\n    const data = await this.get(options)\n\n    if (data.list.length === 0) return []\n\n    const dataNext = await this.getListConcat({\n      pageNum: options?.pageNum ? options.pageNum + 1 : 2,\n      pageSize: options?.pageSize ?? 30,\n      filters: options?.filters ?? []\n    })\n\n    return [...data.list, ...dataNext]\n  }\n\n  /**\n   * Get Character Entry Page Data List.\n   *\n   * @param {string[]} filters\n   *\n   * @returns {Promise<EntryPageListDataCharacterAPIInterface.List[]>}\n   */\n  public async getList (...filters: string[]): Promise<EntryPageListDataCharacterAPIInterface.List[]> {\n    return await this.getListConcat({\n      filters\n    })\n  }\n\n  /**\n   * Get Character Entry Page Data Total.\n   *\n   * @param {string[]} filters\n   *\n   * @returns {Promise<number>}\n   */\n  public async getTotal (...filters: string[]): Promise<number> {\n    const data = await this.get({\n      pageNum: 1,\n      pageSize: 0,\n      filters\n    })\n\n    return Number(data.total)\n  }\n\n  /**\n   * Search List By Character Name.\n   *\n   * @param {string} name Character Name\n   *\n   * @returns {Promise<EntryPageListDataCharacterAPIInterface.List[]>}\n   */\n  public async searchListByName (name: string): Promise<EntryPageListDataCharacterAPIInterface.List[]> {\n    const data = await this.getList()\n    return data.filter(item => item.name === name)\n  }\n}\n"]}